---
title: "Next.jsã§export(SSG)ã—ã¦ã€MicroCMSã‚‚ä½¿ã£ã¦ç”»åƒæœ€é©åŒ–ã‚‚ã—ãŸã„æ¬²å¼µã‚Šã•ã‚“ã¸"
emoji: "ğŸ‘‹"
type: "tech"
topics:
  - "nextjs"
  - "react"
  - "microcms"
  - "cms"
published: true
published_at: "2024-11-12 10:31"
---

MicroCMSã‚’ä½¿ã£ã¦ãƒ¬ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒãƒ¼ã«Next.jsã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã„ã€å°šä¸”ã¤ç”»åƒã¯ãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦MicroCMSã®ãƒ‡ãƒ¼ã‚¿è»¢é€é‡ã‚’ç¯€ç´„ï¼†ç”»åƒã®æœ€é©åŒ–ã—ãŸã‹ã£ãŸã€‚
ã“ã‚“ãªæ¬²å¼µã‚Šã•ã‚“ã¯è‡ªåˆ†ã ã‘ã‹ã‚‚ã—ã‚Œãªã„ã€‚
## Next Export Optimize Imagesã‚’ä½¿ã£ã¦ç”»åƒã‚’æœ€é©åŒ–
ãƒ¬ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒãƒ¼ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã«```output: "export"```(SSG)ã‚’ã—ãŸã‹ã£ãŸã®ã§```next/image```ã®æœ€é©åŒ–ã¯ä½¿ãˆãªã‹ã£ãŸã€‚
```Next Export Optimize Images```ã‚’ä½¿ã£ã¦æœ€é©åŒ–ã—ãŸã€‚
https://next-export-optimize-images.vercel.app/

## MicroCMSã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ç”»åƒã®æœ€é©åŒ–
```export-images.config.js```ã®```remoteImages```ã«ç”»åƒã®URLã®é…åˆ—ã‚’æ¸¡ã™ã¨ãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦æœ€é©åŒ–ã—ã¦ãã‚Œã‚‹ã€‚ã™ã”ã„ã€‚
```js:export-images.config.js
module.exports = {
  remoteImages: ['https://next-export-optimize-images.vercel.app/og.png'],
  // remoteImages: async () => {
  //   const imageUrls = await getImageUrls() // get image urls from CMS, etc.
  //   return imageUrls
  // }
}
```

## ç”»åƒãŒæ—¥æœ¬èªãƒ•ã‚¡ã‚¤ãƒ«åã®å ´åˆã®å¯¾å¿œ
ã“ã®ã¾ã¾ã ã¨ç”»åƒãŒ```ã‚ã„ã†ãˆãŠ.jpg```ã¿ãŸã„ãªãƒ•ã‚¡ã‚¤ãƒ«åã®å ´åˆã€
URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦```%E3%81%82%E3%81%84%E3%81%86%E3%81%88%E3%81%8A.jpg```ã¿ãŸã„ãªãƒ•ã‚¡ã‚¤ãƒ«åã«ãªã‚‹ã€‚
ãã†ã™ã‚‹ã¨Next.jsã§ç”»åƒã‚’è¡¨ç¤ºã§ããªããªã‚‹ã€‚å¤šåˆ†ã€‚
ã“ã®å•é¡Œã‚’ã©ã†ã—ã‚ˆã†ã‹ä½•æ™‚é–“ã‚‚è€ƒãˆãŸã€‚
```export-images.config.js```ã®```filenameGenerator```ã‚’ä½¿ã£ã¦URLãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚Œã°ã„ã‘ãŸã€‚
```js:export-images.config.js
filenameGenerator: ({ path, name, width, extension }) => {
	const fileName = `${path.replace(/^\//, "").replace(/\//g, "-")}/${decodeURIComponent(name)}.${width}.${extension}`;
	console.log(fileName);
	return fileName;
},
```

## çµ‚ã‚ã‚Š
ã“ã‚“ãªäº‹ã—ãŸã„äººãŒã»ã‹ã«ã„ã‚‹ã‹åˆ†ã‹ã‚Šã¾ã›ã‚“ãŒã€å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚
